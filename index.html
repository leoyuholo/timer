<!DOCTYPE html> <html> <head> <meta charset=utf-8> <meta name=Description content="Count up/down timer with minimalistic apperance"> <meta name=author content="Leo Yu Ho, Lo <leoyuholo@gmail.com>"> <meta name=keywords content="timer, count up, count down, minimalistic, web"> <meta name=viewport content="width=device-width, user-scalable=no"> <meta name=google-site-verification content=61jO64fyWWaLmqSBJY4dNI-BShZyM34Zzxct6B6XCfY /> <title>Timer</title> <style type=text/css>html{height:100%}body{color:#999;margin:0 auto;display:table;max-width:90%;min-width:35em;height:100%}@media(max-width:600px){body{width:90%;min-width:0}}#now{font-size:1em;padding:.6em 0}#now>div{display:inline}#timer{color:#000;font-family:arial,sans-serif;padding:.6em 0}#timer>.timer,#timer>.error{font-size:3em;margin-right:.2em}#timer>div{display:inline}.error>div{display:inline}#remarks{text-align:right;font-size:1em;padding:1em 0 1em}#remarks>div{display:block}#remarks>div>div{display:inline}#footer>p{font-weight:bold}.subarea{opacity:.3}body:hover>.subarea{opacity:1}.timer,.hash{font-weight:bold}.datetime{font-style:italic}.alarm{background-color:#000}.alarm>#timer{color:#999}.alarm>.subarea{opacity:1}.alarm .toggle-content{display:block}</style> </head> <body id=leoyuholo-timer> <div id=now class=subarea>Now: <div class="now-text datetime">00:00:00</div></div> <div id=timer class=main></div> <div id=remarks class=subarea> <div id=remarks-1></div> <div id=remarks-2></div> </div> <div id=footer class=subarea> <p>For a countdown timer, try:</p> <ul> <li><a href=#5>#5</a> to countdown 5 minutes</li> <li><a href=#1h10m12s>#1h10m12s</a> to countdown 1 hour 10 minutes 12 seconds</li> <li><a href=#515pm>#515pm</a> to countdown to 5:15pm</li> <li><a href=#930am6Jul2015>#930am6Jul2015</a> to countdown to 9:30am 6 July, 2015</li> <li>Or, <a href=#>#</a> for counting up</li> </ul> <p>About this timer:</p> <ul> <li>Fork me on <a href=https://github.com/leoyuholo/timer>GitHub</a></li> <li>Minimalistic design is inspired by <a href=http://cd.justinjc.com/>cd.justinjs.com</a></li> </ul> </div> </body> <script src=http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js></script> <script type=text/javascript>(function(){var g=this;var h=function(){};h.dayCount=86400000;h.hourCount=3600000;h.minuteCount=60000;h.secondCount=1000;h.dhmsRegex=/^(?:(\d+)d)?(?:(\d+)h)?(?:(\d+)m)?(?:(\d+)s)?$/i;h.isDhms=function(a){return h.dhmsRegex.test(a)};h.parseDhms=function(a){var b=h.dhmsRegex.exec(a);if(null===b){return null}else{return{day:b[1]?+b[1]:0,hour:b[2]?+b[2]:0,minute:b[3]?+b[3]:0,second:b[4]?+b[4]:0}}};var j={jan:0,feb:1,mar:2,apr:3,may:4,jun:5,jul:6,aug:7,sep:8,oct:9,nov:10,dev:11};h.dtRegex=/^(10|11|12|[0-9])([0-5][0-9])?([0-5][0-9])?([ap]m)(?:(\d{1,2})(jan|january|feb|feb|february|mar|march|apr|april|may|jun|june|jul|july|aug|august|sep|september|oct|october|nov|november|dec|december)(\d{4})?)?$/i;h.isDt=function(a){var e=h.dtRegex.exec(a);if(null===e){return false}else{var t=new Date(),q=+e[1]+("pm"===e[4]?12:0),r=e[2]?+e[2]:0,s=e[3]?+e[3]:0,c=e[5]?+e[5]:t.getDate(),f=e[6]?j[e[6].substring(0,3).toLowerCase()]:t.getMonth(),d=e[7]?+e[7]:t.getFullYear(),b=new Date(d,f,c,q,r,s);if(!(b.getFullYear()===d&&b.getMonth()===f&&b.getDate())){return false}else{return true}}};h.parseDt=function(a){if(!h.isDt(a)){return null}else{var b=h.dtRegex.exec(a);return{hour:+b[1]+("pm"===b[4]?12:0),minute:b[2]?+b[2]:0,second:b[3]?+b[3]:0,day:b[5]?+b[5]:null,month:b[6]?j[b[6].substring(0,3).toLowerCase()]:null,year:b[7]?+b[7]:null}}};h.countRegex=/^(\d+)$/;h.isCount=function(a){return h.countRegex.test(a)};h.parseCount=function(a){var b=h.countRegex.exec(a);if(null===b){return null}else{return +b[1]}};h.isParsable=function(a){return h.isDhms(a)||h.isDt(a)||h.isCount(a)};h.makeDatetime=function(b){if(h.isCount(b)){return new Date(h.minuteCount*h.parseCount(b))}else{if(h.isDhms(b)){var d=h.parseDhms(b);return new Date(h.dayCount*d.day+h.hourCount*d.hour+h.minuteCount*d.minute+h.secondCount*d.second)}else{if(h.isDt(b)){var a=h.parseDt(b),c=new Date();if(!a.year){a.year=c.getFullYear()}if(!a.day){var e=new Date();e.setHours(a.hour);e.setMinutes(a.minute);e.setSeconds(a.second);a.day=e<c?c.getDate()+1:c.getDate();a.month=c.getMonth()}return new Date(a.year,a.month,a.day,a.hour,a.minute,a.second)}else{return null}}}};h.shortPurals=[["d","d"],["h","h"],["m","m"],["s","s"],["ms","ms"]];h.longPurals=[["day","days"],["hour","hours"],["minute","minutes"],["second","seconds"],["millisecond","milliseconds"]];var l={day:0,hour:1,minute:2,second:3,millisecond:4};h.displayString=function(a,f,c,d){a=Math.abs(a);f=f||"second";var e=[Math.floor(a/h.dayCount),Math.floor(a/h.hourCount)%24,Math.floor(a/h.minuteCount)%60,Math.floor(a/h.secondCount)%60,a%1000],c=c||h.longPurals,b=0;return e.map(function(p,o){if((d&&0===p)||(0===p&&0===b&&o<l[f])||o>l[f]){return false}else{b=o;return p+" "+(1===p?c[o][0]:c[o][1])}}).filter(function(n){return n}).join(" ")};h.shortDtFormat="HH:mm:ss";h.longDtFormat="dd/MM/yyyy HH:mm:ss";var i=function(a){return a<10?"0"+a:a};var k=function(b,c,a){a=a||function(d){return d};return function(d){return d.split(b).map(a).join(c)}};h.shortString=function(b,a){a=a||h.shortDtFormat;if("number"===typeof b){b=new Date(b)}return k("yyyy",b.getFullYear(),k("MM",i(b.getMonth()+1),k("dd",i(b.getDate()),k("HH",i(b.getHours()),k("mm",i(b.getMinutes()),k("ss",i(b.getSeconds())))))))(a)};g.Datetime=h}.call(this));</script> <script type=text/javascript>(function(){var e=this;var d=function(a){var b=a;b.now=Date.now();b.remain=b.end-b.now;b.elapsed=b.now-b.start;var c=function(h){h.call(null,a)};if(b.end<=b.now){b.events.end.forEach(c);b.events.end=[]}b.events.update.forEach(c);b.timeout=setTimeout(function(){d(a)},b.frequency-(b.elapsed%b.frequency))};var f=function(l,a,b,c){var k={now:Date.now(),start:Date.now(),end:0,remain:0,elapsed:0,frequency:1000,events:{end:[],update:[]},timeout:""};k.end=l?l instanceof Date?l.getTime():"number"===typeof l?k.now+l:k.now+ +l:0;k.duration=0===k.end?0:k.end-k.start;if("function"===typeof a){k.events.end.push(a)}Array.prototype.slice.call(arguments,2).forEach(function(g){if("function"===typeof g){k.events.update.push(g)}});for(var j in k){this[j]=k[j]}d(this)};f.prototype.destroy=function(){var a=this;if(a.timeout){clearTimeout(a.timeout)}a.timeout=""};e.Timer=f}.call(this));</script> <script type=text/javascript>(function(){var d=this;var c=function(){};c.getHash=function(){var a=window.location.hash;return a?a.slice(1):""};c.dtFormat=Datetime.shortDtFormat;c.purals=Datetime.longPurals;c.precision="second";c.displayString=function(a,b){return Datetime.displayString(a,c.precision,c.purals,b)};c.shortString=function(a){return Datetime.shortString(a,c.dtFormat)};c.updateFormat=function(){var h=false,a=false;var g=function(e){if(c.dtFormat!==e){a=true;c.dtFormat=e}};var b=function(e){if(c.purals!==e){h=true;c.purals=e}};if(c.timer&&c.timer.overDays){g(Datetime.longDtFormat)}else{g(Datetime.shortDtFormat)}if($(window).width()<=600){b(Datetime.shortPurals)}else{b(Datetime.longPurals)}if(h&&c.timer){c.updateElapsed(c.timer);c.updateRemain(c.timer);c.updateDuration(c.timer)}if(a&&c.timer){c.updateNow(c.timer);c.updateStart(c.timer);c.updateEnd(c.timer)}};c.updateTitle=function(a){document.title=$("#timer").text()};c.updateNow=function(a){$(".now-text").text(c.shortString(a.now))};c.updateElapsed=function(a){if(!a.overDays&&a.elapsed>=Datetime.dayCount){a.overDays=true;c.updateFormat(a)}$(".elapsed-text").text(c.displayString(a.elapsed));c.updateTitle(a)};c.updateRemain=function(a){$(".remain-text").text(c.displayString(a.remain));c.updateTitle(a)};c.updateStart=function(a){$(".start-text").text(c.shortString(a.start))};c.updateDuration=function(a){$(".duration-text").text(c.displayString(a.duration,true))};c.updateEnd=function(a){$(".end-text").text(c.shortString(a.end))};c.elapsedTextHtml='<div class="elapsed-text timer"></div>';c.remainTextHtml='<div class="remain-text timer"></div>';c.startTextHtml='<div class="start-text datetime"></div>';c.durationTextHtml='<div class="duration-text timer"></div>';c.endTextHtml='<div class="end-text datetime"></div>';c.countUp=function(){$("#timer").html(c.elapsedTextHtml+" elapsed");$("#remarks-1").html("started counting at "+c.startTextHtml);c.timer=new Timer(null,null,c.updateNow,c.updateElapsed);c.updateStart(c.timer)};c.countTo=function(a){$("#timer").html(c.remainTextHtml+" remains");$("#remarks-1").html("started waiting at "+c.startTextHtml+" for "+c.durationTextHtml+" until "+c.endTextHtml);var b=Datetime.makeDatetime(a);if(!Datetime.isDt(a)){b=b.getTime()}c.timer=new Timer(b,c.finishCountTo,c.updateNow,c.updateRemain);if(c.timer.duration>Datetime.dayCount){c.timer.overDays=true}c.updateFormat();c.updateStart(c.timer);c.updateDuration(c.timer);c.updateEnd(c.timer)};c.hashError=function(a){$("#timer").html('<div class="error">Ooops! <div class="hash">'+a+"</div> looks unfamiliar! :(</div>");c.timer=new Timer(null,null,c.updateNow)};c.finishCountTo=function(a){$("#timer").html(c.durationTextHtml+" passed");$("#remarks-2").html("You are now "+c.remainTextHtml+" late.");c.updateDuration(a);c.updateRemain(a);$("body").addClass("alarm")};c.clearAll=function(){$("#timer").html("");$("#remarks-1").html("");$("#remarks-2").html("");c.updateFormat();$("body").removeClass("alarm");document.title="Timer"};c.dispatch=function(a){if(c.timer){c.timer.destroy()}c.clearAll();if(!a){c.countUp()}else{if(Datetime.isParsable(a)){c.countTo(a)}else{c.hashError(a)}}};c.main=function(){window.onhashchange=function(){c.dispatch(c.getHash())};var a=$(window).width();$(window).resize(function(){var b=$(window).width();if((a>600&&b<=600)||(a<=600&&b>600)){a=b;c.updateFormat()}});c.dispatch(c.getHash())};d.app=c}.call(this));</script> <script type=text/javascript>app.main();</script> </html>